(this["webpackJsonpreact-mobx-typescript-realworld-example-app"]=this["webpackJsonpreact-mobx-typescript-realworld-example-app"]||[]).push([[0],{15:function(e,t,a){"use strict";var n=a(5),r=a(6),l=a(1),c=a(4),s=function(){function e(){Object(n.a)(this,e),this.currentUser=void 0,this.loadingUser=void 0,this.updatingUser=void 0,this.updatingUserErrors=void 0,Object(l.f)(this,{currentUser:l.g,loadingUser:l.g,updatingUser:l.g,updatingUserErrors:l.g,pullUser:l.b,updateUser:l.b,forgetUser:l.b})}return Object(r.a)(e,[{key:"pullUser",value:function(){var e=this;return this.loadingUser=!0,c.a.Auth.current().then(Object(l.b)((function(t){var a=t.user;e.currentUser=a}))).finally(Object(l.b)((function(){e.loadingUser=!1})))}},{key:"updateUser",value:function(e){var t=this;return this.updatingUser=!0,c.a.Auth.save(e).then(Object(l.b)((function(e){var a=e.user;t.currentUser=a}))).finally(Object(l.b)((function(){t.updatingUser=!1})))}},{key:"forgetUser",value:function(){this.currentUser=void 0}}]),e}();t.a=new s},19:function(e,t,a){"use strict";var n=a(5),r=a(6),l=a(1),c=a(4),s=a(15),o=a(9),i=function(){function e(){Object(n.a)(this,e),this.inProgress=!1,this.errors=void 0,this.values={username:"",email:"",password:""},Object(l.f)(this,{inProgress:l.g,errors:l.g,values:l.g,setUsername:l.b,setEmail:l.b,setPassword:l.b,reset:l.b,login:l.b,register:l.b,logout:l.b})}return Object(r.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setEmail",value:function(e){this.values.email=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"reset",value:function(){this.values.username="",this.values.email="",this.values.password=""}},{key:"login",value:function(){var e=this;return this.inProgress=!0,this.errors=void 0,c.a.Auth.login(this.values.email,this.values.password).then((function(e){var t=e.user;return o.a.setToken(t.token)})).then((function(){return s.a.pullUser()})).catch(Object(l.b)((function(t){throw e.errors=t.response&&t.response.body&&t.response.body.errors,t}))).finally(Object(l.b)((function(){e.inProgress=!1})))}},{key:"register",value:function(){var e=this;return this.inProgress=!0,this.errors=void 0,c.a.Auth.register(this.values.username,this.values.email,this.values.password).then((function(e){var t=e.user;return o.a.setToken(t.token)})).then((function(){return s.a.pullUser()})).catch(Object(l.b)((function(t){throw e.errors=t.response&&t.response.body&&t.response.body.errors,t}))).finally(Object(l.b)((function(){e.inProgress=!1})))}},{key:"logout",value:function(){return o.a.setToken(null),s.a.forgetUser(),Promise.resolve()}}]),e}();t.a=new i},39:function(e,t,a){e.exports=a(71)},4:function(e,t,a){"use strict";(function(e){var n=a(33),r=a.n(n),l=a(34),c=a.n(l),s=a(9),o=a(19),i=r()(c.a,e.Promise),u="https://conduit.productionready.io/api",m=encodeURIComponent,f=function(e){return e&&e.response&&401===e.response.status&&o.a.logout(),e},g=function(e){return e.body},d=function(e){s.a.token&&e.set("authorization","Token ".concat(s.a.token))},h=function(e){return i.del("".concat(u).concat(e)).use(d).end(f).then(g)},v=function(e){return i.get("".concat(u).concat(e)).use(d).end(f).then(g)},p=function(e,t){return i.put("".concat(u).concat(e),t).use(d).end(f).then(g)},b=function(e,t){return i.post("".concat(u).concat(e),t).use(d).end(f).then(g)},E={current:function(){return v("/user")},login:function(e,t){return b("/users/login",{user:{email:e,password:t}})},register:function(e,t,a){return b("/users",{user:{username:e,email:t,password:a}})},save:function(e){return p("/user",{user:e})}},N={getAll:function(){return v("/tags")}},y=function(e,t){return"limit=".concat(e,"&offset=").concat(t?t*e:0)},w=function(e){return Object.assign({},e,{slug:void 0})},k={all:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;arguments.length>2&&arguments[2];return v("/articles?".concat(y(t,e)))},byAuthor:function(e,t,a){return v("/articles?author=".concat(m(e),"&").concat(y(5,t)))},byTag:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return v("/articles?tag=".concat(m(e),"&").concat(y(a,t)))},del:function(e){return h("/articles/".concat(e))},favorite:function(e){return b("/articles/".concat(e,"/favorite"),{})},favoritedBy:function(e,t,a){return v("/articles?favorited=".concat(m(e),"&").concat(y(5,t)))},feed:function(e,t){return v("/articles/feed?limit=".concat(t,"&offset=").concat(e))},get:function(e){return v("/articles/".concat(e))},unfavorite:function(e){return h("/articles/".concat(e,"/favorite"))},update:function(e){return p("/articles/".concat(e.slug),{article:w(e)})},create:function(e){return b("/articles",{article:e})}},S={create:function(e,t){return b("/articles/".concat(e,"/comments"),{comment:t})},delete:function(e,t){return h("/articles/".concat(e,"/comments/").concat(t))},forArticle:function(e){return v("/articles/".concat(e,"/comments"))}},j={follow:function(e){return b("/profiles/".concat(e,"/follow"),{})},get:function(e){return v("/profiles/".concat(e))},unfollow:function(e){return h("/profiles/".concat(e,"/follow"))}};t.a={Articles:k,Auth:E,Comments:S,Profile:j,Tags:N}}).call(this,a(21))},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),c=a.n(l),s=a(2),o=a(10),i=a(3),u=a(5),m=a(6),f=a(1),g=a(4),d=new(function(){function e(){Object(u.a)(this,e),this.isLoading=!1,this.page=0,this.totalPagesCount=0,this.articlesRegistry=f.g.map(),this.predicate={},Object(f.f)(this,{isLoading:f.g,page:f.g,totalPagesCount:f.g,articlesRegistry:f.g,predicate:f.g,articles:f.c,setPage:f.b,setPredicate:f.b,loadArticles:f.b,loadArticle:f.b,makeFavorite:f.b,unmakeFavorite:f.b,createArticle:f.b,updateArticle:f.b,deleteArticle:f.b})}return Object(m.a)(e,[{key:"clear",value:function(){this.articlesRegistry.clear(),this.page=0}},{key:"getArticle",value:function(e){return this.articlesRegistry.get(e)}},{key:"setPage",value:function(e){this.page=e}},{key:"setPredicate",value:function(e){JSON.stringify(e)!==JSON.stringify(this.predicate)&&(this.clear(),this.predicate=e)}},{key:"$req",value:function(){return this.predicate.myFeed?g.a.Articles.feed(this.page,10):this.predicate.favoritedBy?g.a.Articles.favoritedBy(this.predicate.favoritedBy,this.page,10):this.predicate.tag?g.a.Articles.byTag(this.predicate.tag,this.page,10):this.predicate.author?g.a.Articles.byAuthor(this.predicate.author,this.page,10):g.a.Articles.all(this.page,10,this.predicate)}},{key:"loadArticles",value:function(){var e=this;return this.isLoading=!0,this.$req().then(Object(f.b)((function(t){var a=t.articles,n=t.articlesCount;e.articlesRegistry.clear(),a.forEach((function(t){return e.articlesRegistry.set(t.slug,t)})),e.totalPagesCount=Math.ceil(n/10)}))).finally(Object(f.b)((function(){e.isLoading=!1})))}},{key:"loadArticle",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.acceptCached,r=void 0!==n&&n;if(r){var l=this.getArticle(e);if(l)return Promise.resolve(l)}return this.isLoading=!0,g.a.Articles.get(e).then(Object(f.b)((function(e){var a=e.article;return t.articlesRegistry.set(a.slug,a),a}))).finally(Object(f.b)((function(){t.isLoading=!1})))}},{key:"makeFavorite",value:function(e){var t=this.getArticle(e);return t&&!t.favorited?(t.favorited=!0,t.favoritesCount++,g.a.Articles.favorite(e).catch(Object(f.b)((function(e){throw t.favorited=!1,t.favoritesCount--,e})))):Promise.resolve()}},{key:"unmakeFavorite",value:function(e){var t=this.getArticle(e);return t&&t.favorited?(t.favorited=!1,t.favoritesCount--,g.a.Articles.unfavorite(e).catch(Object(f.b)((function(e){throw t.favorited=!0,t.favoritesCount++,e})))):Promise.resolve()}},{key:"createArticle",value:function(e){var t=this;return g.a.Articles.create(e).then((function(e){var a=e.article;return t.articlesRegistry.set(a.slug,a),a}))}},{key:"updateArticle",value:function(e){var t=this;return g.a.Articles.update(e).then((function(e){var a=e.article;return t.articlesRegistry.set(a.slug,a),a}))}},{key:"deleteArticle",value:function(e){var t=this;return this.articlesRegistry.delete(e),g.a.Articles.del(e).catch(Object(f.b)((function(e){throw t.loadArticles(),e})))}},{key:"articles",get:function(){var e=[],t=this.articlesRegistry.values(),a=!0,n=!1,r=void 0;try{for(var l,c=t[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var s=l.value;e.push(s)}}catch(o){n=!0,r=o}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return e}}]),e}()),h=new(function(){function e(){Object(u.a)(this,e),this.isCreatingComment=!1,this.isLoadingComments=!1,this.commentErrors=void 0,this.articleSlug="",this.comments=[],Object(f.f)(this,{isCreatingComment:f.g,isLoadingComments:f.g,commentErrors:f.g,articleSlug:f.g,comments:f.g,setArticleSlug:f.b,loadComments:f.b,createComment:f.b,deleteComment:f.b})}return Object(m.a)(e,[{key:"setArticleSlug",value:function(e){this.articleSlug!==e&&(this.comments=[],this.articleSlug=e)}},{key:"loadComments",value:function(){var e=this;return this.isLoadingComments=!0,this.commentErrors=void 0,g.a.Comments.forArticle(this.articleSlug).then(Object(f.b)((function(t){var a=t.comments;e.comments=a}))).catch(Object(f.b)((function(t){throw e.commentErrors=t.response&&t.response.body&&t.response.body.errors,t}))).finally(Object(f.b)((function(){e.isLoadingComments=!1})))}},{key:"createComment",value:function(e){var t=this;return this.isCreatingComment=!0,g.a.Comments.create(this.articleSlug,e).then((function(){return t.loadComments()})).finally(Object(f.b)((function(){t.isCreatingComment=!1})))}},{key:"deleteComment",value:function(e){var t=this,a=this.comments.findIndex((function(t){return t.id===e}));return a>-1&&this.comments.splice(a,1),g.a.Comments.delete(this.articleSlug,e).catch(Object(f.b)((function(e){throw t.loadComments(),e})))}}]),e}()),v=new(function(){function e(){Object(u.a)(this,e),this.inProgress=!1,this.errors=void 0,this.articleSlug="",this.title="",this.description="",this.body="",this.tagList=[],Object(f.f)(this,{inProgress:f.g,errors:f.g,articleSlug:f.g,title:f.g,description:f.g,body:f.g,tagList:f.g,setArticleSlug:f.b,loadInitialData:f.b,reset:f.b,setTitle:f.b,setDescription:f.b,setBody:f.b,addTag:f.b,removeTag:f.b,submit:f.b})}return Object(m.a)(e,[{key:"setArticleSlug",value:function(e){this.articleSlug!==e&&(this.reset(),this.articleSlug=e)}},{key:"loadInitialData",value:function(){var e=this;return this.articleSlug?(this.inProgress=!0,d.loadArticle(this.articleSlug,{acceptCached:!0}).then(Object(f.b)((function(t){if(!t)throw new Error("Can't load original article");e.title=t.title,e.description=t.description,e.body=t.body,e.tagList=t.tagList}))).finally(Object(f.b)((function(){e.inProgress=!1})))):Promise.resolve()}},{key:"reset",value:function(){this.title="",this.description="",this.body="",this.tagList=[]}},{key:"setTitle",value:function(e){this.title=e}},{key:"setDescription",value:function(e){this.description=e}},{key:"setBody",value:function(e){this.body=e}},{key:"addTag",value:function(e){this.tagList.includes(e)||this.tagList.push(e)}},{key:"removeTag",value:function(e){this.tagList=this.tagList.filter((function(t){return t!==e}))}},{key:"submit",value:function(){var e=this;this.inProgress=!0,this.errors=void 0;var t={title:this.title,description:this.description,body:this.body,tagList:this.tagList,slug:this.articleSlug};return(this.articleSlug?d.updateArticle(t):d.createArticle(t)).catch(Object(f.b)((function(t){throw e.errors=t.response&&t.response.body&&t.response.body.errors,t}))).finally(Object(f.b)((function(){e.inProgress=!1})))}}]),e}()),p=a(9),b=a(19),E=a(15),N=new(function(){function e(){Object(u.a)(this,e),this.profile=void 0,this.isLoadingProfile=!1,Object(f.f)(this,{profile:f.g,isLoadingProfile:f.g,loadProfile:f.b,follow:f.b,unfollow:f.b})}return Object(m.a)(e,[{key:"loadProfile",value:function(e){var t=this;this.isLoadingProfile=!0,g.a.Profile.get(e).then(Object(f.b)((function(e){var a=e.profile;t.profile=a}))).finally(Object(f.b)((function(){t.isLoadingProfile=!1})))}},{key:"follow",value:function(){var e=this;this.profile&&!this.profile.following&&(this.profile.following=!0,g.a.Profile.follow(this.profile.username).catch(Object(f.b)((function(){e.profile.following=!1}))))}},{key:"unfollow",value:function(){var e=this;this.profile&&this.profile.following&&(this.profile.following=!1,g.a.Profile.unfollow(this.profile.username).catch(Object(f.b)((function(){e.profile.following=!0}))))}}]),e}()),y={articleStore:d,commentStore:h,editorStore:v,authStore:b.a,commonStore:p.a,profileStore:N,userStore:E.a},w=r.a.createContext(null),k=function(){var e=r.a.useContext(w);if(!e)throw new Error("useStore must be used within a StoreProvider.");return e},S=function(e){return e.currentUser?null:r.a.createElement("ul",{className:"nav navbar-nav pull-xs-right"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/",className:"nav-link"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/login",className:"nav-link"},"Sign in")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/register",className:"nav-link"},"Sign up")))},j=function(e){return e.currentUser?r.a.createElement("ul",{className:"nav navbar-nav pull-xs-right"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/",className:"nav-link"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/editor",className:"nav-link"},r.a.createElement("i",{className:"ion-compose"}),"\xa0New Post")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/settings",className:"nav-link"},r.a.createElement("i",{className:"ion-gear-a"}),"\xa0Settings")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/@".concat(e.currentUser.username),className:"nav-link"},r.a.createElement("img",{src:e.currentUser.image,className:"user-pic",alt:""}),e.currentUser.username))):null},O=function(){var e=k(),t=e.commonStore,a=e.userStore;return r.a.createElement(i.a,null,(function(){return r.a.createElement("nav",{className:"navbar navbar-light"},r.a.createElement("div",{className:"container"},r.a.createElement(s.b,{to:"/",className:"navbar-brand"},t.appName.toLowerCase()),r.a.createElement(S,{currentUser:a.currentUser}),r.a.createElement(j,{currentUser:a.currentUser})))}))},C=a(25),U=a.n(C),P=function(e){var t=e.appName;return e.token?null:r.a.createElement("div",{className:"banner"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"logo-font"},t.toLowerCase()),r.a.createElement("p",null,"A place to share your knowledge.")))},A=a(26),x=function(e){var t=k().articleStore,a=function(a){a.preventDefault();var n=e.article;n.favorited?t.unmakeFavorite(n.slug):t.makeFavorite(n.slug)};return r.a.createElement(i.a,null,(function(){var t=e.article,n=t.favorited?"btn btn-sm btn-primary":"btn btn-sm btn-outline-primary";return r.a.createElement("div",{className:"article-preview"},r.a.createElement("div",{className:"article-meta"},r.a.createElement(s.b,{to:"/@".concat(t.author.username)},r.a.createElement("img",{src:t.author.image,alt:""})),r.a.createElement("div",{className:"info"},r.a.createElement(s.b,{className:"author",to:"/@".concat(t.author.username)},t.author.username),r.a.createElement("span",{className:"date"},new Date(t.createdAt).toDateString())),r.a.createElement("div",{className:"pull-xs-right"},r.a.createElement("button",{className:n,onClick:a},r.a.createElement("i",{className:"ion-heart"})," ",t.favoritesCount))),r.a.createElement(s.b,{to:"/article/".concat(t.slug),className:"preview-link"},r.a.createElement("h1",null,t.title),r.a.createElement("p",null,t.description),r.a.createElement("span",null,"Read more..."),r.a.createElement("ul",{className:"tag-list"},t.tagList.map((function(e){return r.a.createElement("li",{className:"tag-default tag-pill tag-outline",key:e},e)})))))}))},L=function(e){if(e.totalPagesCount<2)return null;for(var t=[],a=0;a<e.totalPagesCount;++a)t.push(a);return r.a.createElement("nav",null,r.a.createElement("ul",{className:"pagination"},t.map((function(t){var a=t===e.currentPage;return r.a.createElement("li",{className:a?"page-item active":"page-item",onClick:function(a){a.preventDefault(),e.onSetPage(t)},key:t.toString()},r.a.createElement("a",{className:"page-link",href:""},t+1))}))))},D={borderRadius:"50%",width:"40px",height:"40px",margin:"90px auto",position:"relative",borderTop:"3px solid rgba(0, 0, 0, 0.1)",borderRight:"3px solid rgba(0, 0, 0, 0.1)",borderBottom:"3px solid rgba(0, 0, 0, 0.1)",borderLeft:"3px solid #818a91",transform:"translateZ(0)",animation:"loading-spinner 0.5s infinite linear"},T=function(){return r.a.createElement("div",{className:"loading-spinner",style:D},r.a.createElement("style",null,"\n    @keyframes loading-spinner {\n      0% { transform : rotate(0deg); }\n      100% { transform : rotate(360deg); }\n    }\n    "))},R=function(e){return e.loading&&0===e.articles.length?r.a.createElement(T,null):0===e.articles.length?r.a.createElement("div",{className:"article-preview"},"No articles are here... yet."):r.a.createElement("div",null,e.articles.map((function(e){return r.a.createElement(x,{article:e,key:e.slug})})),r.a.createElement(L,{onSetPage:e.onSetPage,totalPagesCount:e.totalPagesCount,currentPage:e.currentPage}))},F=function(e){return e.currentUser?r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.c,{className:"nav-link",isActive:function(e,t){return!!t.search.match("tab=feed")},to:{pathname:"/",search:"?tab=feed"}},"Your Feed")):null},I=function(e){return r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.c,{className:"nav-link",isActive:function(e,t){return!t.search.match(/tab=(feed|tag)/)},to:{pathname:"/",search:"?tab=all"}},"Global Feed"))},B=function(e){return e.tag?r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"",className:"nav-link active"},r.a.createElement("i",{className:"ion-pound"})," ",e.tag)):null},M=function(){var e=Object(o.h)(),t=k(),a=t.articleStore,l=t.userStore,c=Object(A.parse)(e.search).tab||"all",s=Object(A.parse)(e.search).tag||"",u=Object(n.useCallback)((function(e,t){switch(e){case"feed":return{myFeed:!0};case"tag":return{tag:t};default:return{}}}),[]),m=function(e){a.setPage(e),a.loadArticles()};return Object(n.useEffect)((function(){a.setPredicate(u(c,s)),a.loadArticles()}),[a,u,c,s]),r.a.createElement(i.a,null,(function(){var e=l.currentUser,t=a.articles,n=a.isLoading,o=a.page,i=a.totalPagesCount;return r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"feed-toggle"},r.a.createElement("ul",{className:"nav nav-pills outline-active"},r.a.createElement(F,{currentUser:e,tab:c}),r.a.createElement(I,{tab:c}),r.a.createElement(B,{tag:s}))),r.a.createElement(R,{articles:t,loading:n,totalPagesCount:i,currentPage:o,onSetPage:m}))}))},W=function(e){var t=e.loading,a=e.tags;return t?r.a.createElement(T,null):a?r.a.createElement("div",{className:"tag-list"},a.map((function(e){return r.a.createElement(s.b,{to:{pathname:"/",search:"?tab=tag&tag="+e},className:"tag-default tag-pill",key:e},e)}))):null},H=function(){var e=k().commonStore;return Object(n.useEffect)((function(){U.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.a.awrap(e.loadTags());case 2:case"end":return t.stop()}}))}),[e]),r.a.createElement(i.a,null,(function(){var t=e.appName,a=e.isLoadingTags,n=e.tags,l=e.token;return r.a.createElement("div",{className:"home-page"},r.a.createElement(P,{token:l,appName:t}),r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement(M,null),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"sidebar"},r.a.createElement("p",null,"Popular Tags"),r.a.createElement(W,{loading:a,tags:n}))))))}))},J=function(e){var t=e.errors;return t?r.a.createElement("ul",{className:"error-messages"},Object.keys(t).map((function(e){return r.a.createElement("li",{key:e},e," ",t[e])}))):null},$=function(e){var t=k().authStore,a=function(e){return t.setEmail(e.target.value)},l=function(e){return t.setPassword(e.target.value)},c=function(a){a.preventDefault(),t.login().then((function(){return e.history.replace("/")})).catch((function(){}))};return Object(n.useEffect)((function(){return function(){return t.reset()}}),[t]),r.a.createElement(i.a,null,(function(){var e=t.values,n=t.errors,o=t.inProgress;return r.a.createElement("div",{className:"auth-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-xs-center"},"Sign In"),r.a.createElement("p",{className:"text-xs-center"},r.a.createElement(s.b,{to:"register"},"Need an account?")),r.a.createElement(J,{errors:n}),r.a.createElement("form",{onSubmit:c},r.a.createElement("fieldset",null,r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"email",placeholder:"Email",value:e.email,onChange:a})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password",value:e.password,onChange:l})),r.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:o},"Sign in")))))))}))},q=function(e){var t=k().authStore,a=function(e){return t.setUsername(e.target.value)},n=function(e){return t.setEmail(e.target.value)},l=function(e){return t.setPassword(e.target.value)},c=function(a){a.preventDefault(),t.register().then((function(){return e.history.replace("/")})).catch((function(){}))};return r.a.createElement(i.a,null,(function(){var e=t.values,o=t.errors,i=t.inProgress;return r.a.createElement("div",{className:"auth-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-xs-center"},"Sign Up"),r.a.createElement("p",{className:"text-xs-center"},r.a.createElement(s.b,{to:"login"},"Have an account?")),r.a.createElement(J,{errors:o}),r.a.createElement("form",{onSubmit:c},r.a.createElement("fieldset",null,r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Username",value:e.username,onChange:a})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"email",placeholder:"Email",value:e.email,onChange:n})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password",value:e.password,onChange:l})),r.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:i},"Sign in")))))))}))},z=function(e){var t=k().userStore;return r.a.createElement(i.a,null,(function(){return t.currentUser?r.a.createElement(o.b,e):r.a.createElement(o.a,{to:"/"})}))},Y=a(37),_=a(14),G=function(e){var t=k().userStore,a=Object(n.useState)({image:"",username:"",bio:"",email:"",password:""}),l=Object(_.a)(a,2),c=l[0],s=l[1],o=function(e){return function(t){var a=Object.assign({},c,Object(Y.a)({},e,t.target.value));s(a)}},u=function(t){t.preventDefault();var a=Object.assign({},c);a.password||delete a.password,e.onSubmitForm(a)};return Object(n.useEffect)((function(){t.currentUser&&s({image:t.currentUser.image||"",username:t.currentUser.username||"",bio:t.currentUser.bio||"",email:t.currentUser.email||"",password:""})}),[t.currentUser]),r.a.createElement(i.a,null,(function(){return r.a.createElement("form",{onSubmit:u},r.a.createElement("fieldset",null,r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"URL of profile picture",value:c.image,onChange:o("image")})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Username",value:c.username,onChange:o("username")})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("textarea",{className:"form-control form-control-lg",rows:8,placeholder:"Short bio about you",value:c.bio,onChange:o("bio")})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"email",placeholder:"Email",value:c.email,onChange:o("email")})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:"New Password",value:c.password,onChange:o("password")})),r.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:t.updatingUser},"Update Settings")))}))},K=function(){var e=Object(o.g)(),t=k(),a=t.authStore,n=t.userStore,l=function(){return a.logout().then((function(){return e.replace("/")}))};return r.a.createElement(i.a,null,(function(){return r.a.createElement("div",{className:"settings-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},r.a.createElement("h1",{className:"text-xs-center"},"Your Settings"),r.a.createElement(J,{errors:n.updatingUserErrors}),r.a.createElement(G,{currentUser:n.currentUser,onSubmitForm:function(e){return n.updateUser(e)}}),r.a.createElement("hr",null),r.a.createElement("button",{className:"btn btn-outline-danger",onClick:l},"Or click here to logout.")))))}))},Z={display:"flex",justifyContent:"center"},Q={display:"inline-block",margin:"20px auto",borderRadius:"4px",padding:"8px 15px",color:"rgb(240, 45, 45)",fontStyle:"bold",backgroundColor:"rgba(240, 45, 45, 0.1)"},V=function(e){return r.a.createElement("div",{style:Z},r.a.createElement("div",{style:Q},e.message))},X=function(e){return e.isUser?r.a.createElement(s.b,{to:"/settings",className:"btn btn-sm btn-outline-secondary action-btn"},r.a.createElement("i",{className:"ion-gear-a"})," Edit Profile Settings"):null},ee=function(e){if(e.isUser)return null;var t="btn btn-sm action-btn";e.following?t+=" btn-secondary":t+=" btn-outline-secondary";return r.a.createElement("button",{className:t,onClick:function(t){t.preventDefault(),e.following?e.unfollow(e.username):e.follow(e.username)}},r.a.createElement("i",{className:"ion-plus-round"}),"\xa0",e.following?"Unfollow":"Follow"," ",e.username)},te=function(e){var t=e.profile;return r.a.createElement("ul",{className:"nav nav-pills outline-active"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.c,{className:"nav-link",isActive:function(e,t){return!t.pathname.match("/favorites")},to:"/@".concat(t.username)},"My Articles")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.c,{className:"nav-link",to:"/@".concat(t.username,"/favorites")},"Favorited Articles")))},ae=function(){var e=Object(o.h)(),t=Object(o.i)(),a=k(),l=a.articleStore,c=a.profileStore,s=a.userStore,u=function(){return c.follow()},m=function(){return c.unfollow()},f=function(e){l.setPage(e),l.loadArticles()},g=/\/favorites/.test(e.pathname)?"favorites":"all",d=Object(n.useMemo)((function(){return"favorites"===g?{favoritedBy:t.username}:{author:t.username}}),[g,t.username]);return Object(n.useEffect)((function(){c.loadProfile(t.username),l.setPredicate(d),l.loadArticles()}),[l,c,d,e.pathname,t.username]),r.a.createElement(i.a,null,(function(){var e=c.profile,t=c.isLoadingProfile,a=s.currentUser;if(t&&!e)return r.a.createElement(T,null);if(!e)return r.a.createElement(V,{message:"Can't load profile"});var n=a&&a.username===e.username;return r.a.createElement("div",{className:"profile-page"},r.a.createElement("div",{className:"user-info"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},r.a.createElement("img",{src:e.image,className:"user-img",alt:""}),r.a.createElement("h4",null,e.username),r.a.createElement("p",null,e.bio),r.a.createElement(X,{isUser:n}),r.a.createElement(ee,{isUser:n,username:e.username,following:e.following,follow:u,unfollow:m}))))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},r.a.createElement("div",{className:"articles-toggle"},r.a.createElement(te,{profile:e})),r.a.createElement(R,{articles:l.articles,totalPagesCount:l.totalPagesCount,onSetPage:f,loading:l.isLoading})))))}))},ne=a(38),re=a.n(ne),le=function(e){var t=e.article;return e.canModify?r.a.createElement("span",null,r.a.createElement(s.b,{to:"/editor/".concat(t.slug),className:"btn btn-outline-secondary btn-sm"},r.a.createElement("i",{className:"ion-edit"})," Edit Article"),r.a.createElement("button",{className:"btn btn-outline-danger btn-sm",onClick:function(){return e.onDelete(t.slug)}},r.a.createElement("i",{className:"ion-trash-a"})," Delete Article")):r.a.createElement("span",null)},ce=Object(i.b)((function(e){var t=e.article;return r.a.createElement("div",{className:"article-meta"},r.a.createElement(s.b,{to:"/@".concat(t.author.username)},r.a.createElement("img",{src:t.author.image,alt:""})),r.a.createElement("div",{className:"info"},r.a.createElement(s.b,{to:"/@".concat(t.author.username),className:"author"},t.author.username),r.a.createElement("span",{className:"date"},new Date(t.createdAt).toDateString())),r.a.createElement(le,{canModify:e.canModify,article:t,onDelete:e.onDelete}))})),se=function(e){var t=Object(n.useState)(""),a=Object(_.a)(t,2),l=a[0],c=a[1],s=k().commentStore,o=function(e){c(e.target.value)},u=function(e){e.preventDefault(),s.createComment({body:l}).then((function(){return c("")}))};return r.a.createElement(i.a,null,(function(){var t=s.isCreatingComment;return r.a.createElement("form",{className:"card comment-form",onSubmit:u},r.a.createElement("div",{className:"card-block"},r.a.createElement("textarea",{className:"form-control",placeholder:"Write a comment...",value:l,disabled:t,onChange:o,rows:3})),r.a.createElement("div",{className:"card-footer"},r.a.createElement("img",{src:e.currentUser.image,className:"comment-author-img",alt:""}),r.a.createElement("button",{className:"btn btn-sm btn-primary",type:"submit"},"Post Comment")))}))},oe=function(e){return e.show?r.a.createElement("span",{className:"mod-options"},r.a.createElement("i",{className:"ion-trash-a",onClick:function(){return e.onDelete(e.commentId)}})):null},ie=function(e){var t=e.comment,a=e.currentUser&&e.currentUser.username===t.author.username;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-block"},r.a.createElement("p",{className:"card-text"},t.body)),r.a.createElement("div",{className:"card-footer"},r.a.createElement(s.b,{to:"/@".concat(t.author.username),className:"comment-author"},r.a.createElement("img",{src:t.author.image,className:"comment-author-img",alt:""})),"\xa0",r.a.createElement(s.b,{to:"/@".concat(t.author.username),className:"comment-author"},t.author.username),r.a.createElement("span",{className:"date-posted"},new Date(t.createdAt).toDateString()),r.a.createElement(oe,{show:a,slug:e.slug,commentId:t.id,onDelete:e.onDelete})))},ue=Object(i.b)((function(e){return r.a.createElement("div",null,e.comments.map((function(t){return r.a.createElement(ie,{comment:t,currentUser:e.currentUser,slug:e.slug,key:t.id,onDelete:e.onDelete})})))})),me=function(e){return e.currentUser?r.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},r.a.createElement("div",null,r.a.createElement(J,{errors:e.errors}),r.a.createElement(se,{slug:e.slug,currentUser:e.currentUser})),r.a.createElement(ue,{comments:e.comments,slug:e.slug,currentUser:e.currentUser,onDelete:e.onDelete})):r.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},r.a.createElement("p",null,r.a.createElement(s.b,{to:"/login"},"Sign in"),"\xa0or\xa0",r.a.createElement(s.b,{to:"/register"},"sign up"),"\xa0to add comments on this article."),r.a.createElement(ue,{comments:e.comments,slug:e.slug,currentUser:e.currentUser,onDelete:e.onDelete}))},fe=function(){var e=Object(o.g)(),t=Object(o.i)().slug,a=k(),l=a.articleStore,c=a.commentStore,s=a.userStore;Object(n.useEffect)((function(){t&&(l.loadArticle(t,{acceptCached:!0}),c.setArticleSlug(t),c.loadComments())}),[l,c,t]);var u=function(t){l.deleteArticle(t).then((function(){return e.replace("/")}))},m=function(e){c.deleteComment(e)};return r.a.createElement(i.a,null,(function(){var e=s.currentUser,a=c.comments,n=c.commentErrors,o=l.getArticle(t||"");if(!o)return r.a.createElement(V,{message:"Can't load article"});var i={__html:re()(o.body,{sanitize:!0})},f=e&&e.username===o.author.username;return r.a.createElement("div",{className:"article-page"},r.a.createElement("div",{className:"banner"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,o.title),r.a.createElement(ce,{article:o,canModify:f,onDelete:u}))),r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row article-content"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("div",{dangerouslySetInnerHTML:i}),r.a.createElement("ul",{className:"tag-list"},o.tagList.map((function(e){return r.a.createElement("li",{className:"tag-default tag-pill tag-outline",key:e},e)}))))),r.a.createElement("hr",null),r.a.createElement("div",{className:"article-actions"}),r.a.createElement("div",{className:"row"},r.a.createElement(me,{comments:a,errors:n,slug:t,currentUser:e,onDelete:m}))))}))},ge=function(){var e=Object(o.g)(),t=Object(o.i)().slug,a=Object(n.useState)(""),l=Object(_.a)(a,2),c=l[0],s=l[1],u=k().editorStore;Object(n.useEffect)((function(){t&&(u.setArticleSlug(t),u.loadInitialData())}),[u,t]);var m=function(e){return u.setTitle(e.target.value)},f=function(e){return u.setDescription(e.target.value)},g=function(e){return u.setBody(e.target.value)},d=function(e){return s(e.target.value)},h=function(e){switch(e.keyCode){case 13:case 9:case 188:9!==e.keyCode&&e.preventDefault(),v()}},v=function(){c&&(u.addTag(c.trim()),s(""))},p=function(t){t.preventDefault(),u.submit().then((function(t){u.reset(),e.replace("/article/".concat(t.slug))}))};return r.a.createElement(i.a,null,(function(){var e=u.inProgress,t=u.errors,a=u.title,n=u.description,l=u.body,s=u.tagList;return r.a.createElement("div",{className:"editor-page"},r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},r.a.createElement(J,{errors:t}),r.a.createElement("form",{onSubmit:p},r.a.createElement("fieldset",null,r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Article Title",value:a,onChange:m,disabled:e})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"What's this article about?",value:n,onChange:f,disabled:e})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("textarea",{className:"form-control",rows:8,placeholder:"Write your article (in markdown)",value:l,onChange:g,disabled:e})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter tags",value:c,onChange:d,onBlur:v,onKeyDown:h,disabled:e}),r.a.createElement("div",{className:"tag-list"},s.map((function(e){return r.a.createElement("span",{className:"tag-default tag-pill",key:e},r.a.createElement("i",{className:"ion-close-round",onClick:function(){return function(e){u.inProgress||u.removeTag(e)}(e)}}),e)})))),r.a.createElement("button",{className:"btn btn-lg pull-xs-right btn-primary",type:"submit",disabled:e},"Publish Article")))))))}))},de=function(){var e=k(),t=e.commonStore,a=e.userStore;return Object(n.useEffect)((function(){t.token&&a.pullUser().finally((function(){return t.setAppLoaded()}))})),r.a.createElement(s.a,null,r.a.createElement(O,null),r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/login",component:$}),r.a.createElement(o.b,{path:"/register",component:q}),r.a.createElement(z,{path:"/settings",component:K}),r.a.createElement(o.b,{path:"/@:username",component:ae}),r.a.createElement(o.b,{path:"/@:username/favorites",component:ae}),r.a.createElement(o.b,{path:"/article/:slug",component:fe}),r.a.createElement(o.b,{path:"/editor/:slug?",component:ge}),r.a.createElement(o.b,{path:"/",component:H})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement((function(e){var t=e.children,a=Object(i.c)((function(){return y}));return r.a.createElement(w.Provider,{value:a},t)}),null,r.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,a){"use strict";var n=a(5),r=a(6),l=a(1),c=a(4),s=function(){function e(){var t=this;Object(n.a)(this,e),this.appName="Conduit",this.token=window.localStorage.getItem("jwt"),this.appLoaded=!1,this.tags=[],this.isLoadingTags=!1,Object(l.f)(this,{appName:l.g,token:l.g,appLoaded:l.g,tags:l.g,isLoadingTags:l.g,loadTags:l.b,setToken:l.b,setAppLoaded:l.b}),Object(l.h)((function(){return t.token}),(function(e){e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt")}))}return Object(r.a)(e,[{key:"loadTags",value:function(){var e=this;return this.isLoadingTags=!0,c.a.Tags.getAll().then(Object(l.b)((function(t){var a=t.tags;e.tags=a.map((function(e){return e.toLowerCase()}))}))).finally(Object(l.b)((function(){e.isLoadingTags=!1})))}},{key:"setToken",value:function(e){this.token=e}},{key:"setAppLoaded",value:function(){this.appLoaded=!0}}]),e}();t.a=new s}},[[39,1,2]]]);
//# sourceMappingURL=main.c158698b.chunk.js.map